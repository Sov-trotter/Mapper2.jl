<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Map · Mapper2.jl</title><link href="https://cdnjs.cloudflare.com/ajax/libs/normalize/4.2.0/normalize.min.css" rel="stylesheet" type="text/css"/><link href="https://fonts.googleapis.com/css?family=Lato|Roboto+Mono" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/default.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL=".."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.2.0/require.min.js" data-main="../assets/documenter.js"></script><script src="../siteinfo.js"></script><script src="../../versions.js"></script><link href="../assets/documenter.css" rel="stylesheet" type="text/css"/></head><body><nav class="toc"><h1>Mapper2.jl</h1><select id="version-selector" onChange="window.location.href=this.value" style="visibility: hidden"></select><form class="search" id="search-form" action="../search.html"><input id="search-query" name="q" type="text" placeholder="Search docs"/></form><ul><li><a class="toctext" href="../index.html">Home</a></li><li><span class="toctext">Manual</span><ul><li><span class="toctext">Architecture Modeling</span><ul><li><a class="toctext" href="architecture/types.html">Core Types</a></li><li><a class="toctext" href="architecture/components.html">AbstractComponent</a></li><li><a class="toctext" href="architecture/constructors.html">Architecture Constructors</a></li></ul></li><li><a class="toctext" href="taskgraph.html">Taskgraph</a></li><li class="current"><a class="toctext" href="map.html">Map</a><ul class="internal"><li><a class="toctext" href="#Verification-Routines-1">Verification Routines</a></li></ul></li><li><a class="toctext" href="extensions.html">Extensions</a></li><li><span class="toctext">Simulated Annealing Placement</span><ul><li><a class="toctext" href="SA/placement.html">Simulated Annealing</a></li><li><a class="toctext" href="SA/sastruct.html">SAStruct</a></li><li><a class="toctext" href="SA/methods.html">Extentable Methods</a></li><li><a class="toctext" href="SA/types.html">Extendable Types</a></li><li><a class="toctext" href="SA/distance.html">SADistance</a></li><li><a class="toctext" href="SA/move_generators.html">Move Generators</a></li><li><a class="toctext" href="SA/map_tables.html">MapTables</a></li></ul></li><li><span class="toctext">Routing</span><ul><li><a class="toctext" href="routing/routing.html">Routing</a></li><li><a class="toctext" href="routing/struct.html">Routing Struct</a></li><li><a class="toctext" href="routing/links.html">Routing Links</a></li><li><a class="toctext" href="routing/channels.html">Routing Channels</a></li><li><a class="toctext" href="routing/graph.html">Routing Graph</a></li></ul></li><li><a class="toctext" href="mappergraphs.html">MapperGraphs</a></li><li><a class="toctext" href="helper.html">Helper Functions</a></li><li><a class="toctext" href="paths.html">Paths</a></li></ul></li></ul></nav><article id="docs"><header><nav><ul><li>Manual</li><li><a href="map.html">Map</a></li></ul><a class="edit-page" href="https://github.com/hildebrandmw/Mapper2.jl/blob/master/docs/src/man/map.md"><span class="fa"></span> Edit on GitHub</a></nav><hr/><div id="topbar"><span>Map</span><a class="fa fa-bars" href="#"></a></div></header><h1><a class="nav-anchor" id="Map-1" href="#Map-1">Map</a></h1><p>The <a href="map.html#Mapper2.MapperCore.Map"><code>Map</code></a> holds both a <a href="architecture/components.html#Mapper2.MapperCore.TopLevel"><code>TopLevel</code></a> and a <a href="taskgraph.html#Mapper2.MapperCore.Taskgraph"><code>Taskgraph</code></a>. An additional <a href="map.html#Mapper2.MapperCore.Mapping"><code>Mapping</code></a> type records how the <code>taskgraph</code> maps to the  <code>toplevel</code>.</p><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="Mapper2.MapperCore.Map" href="#Mapper2.MapperCore.Map"><code>Mapper2.MapperCore.Map</code></a> — <span class="docstring-category">Type</span>.</div><div><div><pre><code class="language-julia">mutable struct Map{D, T&lt;:RuleSet}</code></pre><p><strong>Fields</strong></p><ul><li><p><code>ruleset</code></p><p><a href="../index.html#Mapper2.MapperCore.RuleSet"><code>RuleSet</code></a> for assigning <code>taskgraph</code> to <code>toplevel</code>.</p></li><li><p><code>toplevel</code></p><p><a href="architecture/components.html#Mapper2.MapperCore.TopLevel"><code>TopLevel{A,D}</code></a> - The <code>TopLevel</code> to be used for the mapping.</p></li><li><p><code>taskgraph</code></p><p>The <a href="taskgraph.html#Mapper2.MapperCore.Taskgraph"><code>Taskgraph</code></a> to map to the <code>toplevel</code>.</p></li><li><p><code>options</code></p></li><li><p><code>mapping</code></p><p>How <code>taskgraph</code> is mapped to <code>toplevel</code>.</p></li><li><p><code>metadata</code></p></li></ul><p><strong>Documentation</strong></p><p>Top level data structure. Summary of parameters:</p><ul><li><code>T</code> - The <a href="../index.html#Mapper2.MapperCore.RuleSet"><code>RuleSet</code></a> used to control placement and routing.</li><li><code>D</code> - The number of dimensions in the architecture (will usually be 2 or 3).</li></ul><p><strong>Method List</strong></p><pre><code class="language-julia">Map(ruleset, toplevel, taskgraph, options, mapping, metadata)</code></pre><p>defined at <a href="https://github.com/hildebrandmw/Mapper2.jl/tree/188b7d7b8f74593ef125f94de64ed61a1a6b44ab//src/Map/Map.jl#L42"><code>/home/travis/build/hildebrandmw/Mapper2.jl/src/Map/Map.jl:42</code></a>.</p><pre><code class="language-julia">Map(ruleset, toplevel, taskgraph; options, metadata)</code></pre><p>defined at <a href="https://github.com/hildebrandmw/Mapper2.jl/tree/188b7d7b8f74593ef125f94de64ed61a1a6b44ab//src/Map/Map.jl#L67"><code>/home/travis/build/hildebrandmw/Mapper2.jl/src/Map/Map.jl:67</code></a>.</p></div></div><a class="source-link" target="_blank" href="https://github.com/hildebrandmw/Mapper2.jl/blob/188b7d7b8f74593ef125f94de64ed61a1a6b44ab/src/Map/Map.jl#L35-L40">source</a></section><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="Mapper2.MapperCore.Mapping" href="#Mapper2.MapperCore.Mapping"><code>Mapper2.MapperCore.Mapping</code></a> — <span class="docstring-category">Type</span>.</div><div><div><pre><code class="language-julia">mutable struct Mapping</code></pre><p><strong>Fields</strong></p><ul><li><p><code>nodes</code></p><p><code>Dict{String, Path{Component}}</code> - Takes a node name and returns the path to the <a href="architecture/components.html#Mapper2.MapperCore.Component"><code>Component</code></a> where that node is mapped.</p></li></ul><ul><li><p><code>edges</code></p><p><code>Vector{SparseDiGraph{Union{Path{Link},Path{Port},Path{Component}}}}</code> - Takes a integer index for an edge in the parent <a href="taskgraph.html#Mapper2.MapperCore.Taskgraph"><code>Taskgraph</code></a> and returns a graph whose node types <code>Path</code>s to architectural compoennts.o</p><p>Edge connectivity in the graph describes how the <a href="taskgraph.html#Mapper2.MapperCore.TaskgraphEdge"><code>TaskgraphEdge</code></a> is routed through the <a href="architecture/components.html#Mapper2.MapperCore.TopLevel"><code>TopLevel</code></a></p></li></ul><p><strong>Documentation</strong></p><p>Record of how <a href="taskgraph.html#Mapper2.MapperCore.Taskgraph"><code>Taskgraph</code></a>s and <a href="taskgraph.html#Mapper2.MapperCore.TaskgraphEdge"><code>TaskgraphEdge</code></a>s in a  <a href="taskgraph.html#Mapper2.MapperCore.Taskgraph"><code>Taskgraph</code></a> map to a <a href="architecture/components.html#Mapper2.MapperCore.TopLevel"><code>TopLevel</code></a>.</p><p><strong>Method List</strong></p><pre><code class="language-julia">Mapping(nodes, edges)
Mapping(nodes, edges)</code></pre><p>defined at <a href="https://github.com/hildebrandmw/Mapper2.jl/tree/188b7d7b8f74593ef125f94de64ed61a1a6b44ab//src/Map/Map.jl#L13"><code>/home/travis/build/hildebrandmw/Mapper2.jl/src/Map/Map.jl:13</code></a>.</p></div></div><a class="source-link" target="_blank" href="https://github.com/hildebrandmw/Mapper2.jl/blob/188b7d7b8f74593ef125f94de64ed61a1a6b44ab/src/Map/Map.jl#L8-L11">source</a></section><h2><a class="nav-anchor" id="Verification-Routines-1" href="#Verification-Routines-1">Verification Routines</a></h2><p>Verify the result of placement and routing.</p><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="Mapper2.MapperCore.check_routing" href="#Mapper2.MapperCore.check_routing"><code>Mapper2.MapperCore.check_routing</code></a> — <span class="docstring-category">Function</span>.</div><div><div><pre><code class="language-julia">check_routing(map; quiet)
</code></pre><p>Check routing in <code>map</code>. Return <code>true</code> if <code>map</code> passes all checks. Otherwise, return <code>false</code>. If <code>quiet = false</code>, print status of each test to <code>STDOUT</code>.</p><p>Checks performed:</p><ul><li><a href="map.html#Mapper2.MapperCore.check_placement"><code>check_placement</code></a></li><li><a href="map.html#Mapper2.MapperCore.check_ports"><code>check_ports</code></a></li><li><a href="map.html#Mapper2.MapperCore.check_capacity"><code>check_capacity</code></a></li><li><a href="map.html#Mapper2.MapperCore.check_architecture_connectivity"><code>check_architecture_connectivity</code></a></li><li><a href="map.html#Mapper2.MapperCore.check_routing_connectivity"><code>check_routing_connectivity</code></a></li><li><a href="map.html#Mapper2.MapperCore.check_architecture_resources"><code>check_architecture_resources</code></a></li></ul></div></div><a class="source-link" target="_blank" href="https://github.com/hildebrandmw/Mapper2.jl/blob/188b7d7b8f74593ef125f94de64ed61a1a6b44ab/src/Map/Verification.jl#L6-L8">source</a></section><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="Mapper2.MapperCore.check_placement" href="#Mapper2.MapperCore.check_placement"><code>Mapper2.MapperCore.check_placement</code></a> — <span class="docstring-category">Function</span>.</div><div><div><pre><code class="language-julia">check_placement(map)
</code></pre><p>Ensure that each <a href="taskgraph.html#Mapper2.MapperCore.TaskgraphNode"><code>TaskgraphNode</code></a> is mapped to a valid component.</p></div></div><a class="source-link" target="_blank" href="https://github.com/hildebrandmw/Mapper2.jl/blob/188b7d7b8f74593ef125f94de64ed61a1a6b44ab/src/Map/Verification.jl#L53-L55">source</a></section><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="Mapper2.MapperCore.check_ports" href="#Mapper2.MapperCore.check_ports"><code>Mapper2.MapperCore.check_ports</code></a> — <span class="docstring-category">Function</span>.</div><div><div><pre><code class="language-none">check_ports(m::Map{A}) where A</code></pre><p>Check the source and destination ports for each task in <code>m</code>. Perform the  following checks:</p><ul><li>Each source and destination port for each task channel is valid.</li><li>All sources and destinations for each task channel has been assigned to   a port.</li></ul></div></div><a class="source-link" target="_blank" href="https://github.com/hildebrandmw/Mapper2.jl/blob/188b7d7b8f74593ef125f94de64ed61a1a6b44ab/src/Map/Verification.jl#L77-L86">source</a></section><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="Mapper2.MapperCore.check_capacity" href="#Mapper2.MapperCore.check_capacity"><code>Mapper2.MapperCore.check_capacity</code></a> — <span class="docstring-category">Function</span>.</div><div><div><pre><code class="language-none">check_capacity(m::Map)</code></pre><p>Performs the following checks:</p><ul><li>The number of channels assigned to each routing resource in <code>m.toplevel</code>   does not exceed the stated capacity of that resource.</li></ul></div></div><a class="source-link" target="_blank" href="https://github.com/hildebrandmw/Mapper2.jl/blob/188b7d7b8f74593ef125f94de64ed61a1a6b44ab/src/Map/Verification.jl#L165-L172">source</a></section><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="Mapper2.MapperCore.check_architecture_connectivity" href="#Mapper2.MapperCore.check_architecture_connectivity"><code>Mapper2.MapperCore.check_architecture_connectivity</code></a> — <span class="docstring-category">Function</span>.</div><div><div><pre><code class="language-none">check_architecture_connectivity(m::Map)</code></pre><p>Traverse the routing for each channel in <code>m.taskgraph</code>. Check:</p><ul><li>The nodes on each side of an edge in the routing graph are actually connected   in the underlying architecture.</li></ul></div></div><a class="source-link" target="_blank" href="https://github.com/hildebrandmw/Mapper2.jl/blob/188b7d7b8f74593ef125f94de64ed61a1a6b44ab/src/Map/Verification.jl#L208-L215">source</a></section><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="Mapper2.MapperCore.check_routing_connectivity" href="#Mapper2.MapperCore.check_routing_connectivity"><code>Mapper2.MapperCore.check_routing_connectivity</code></a> — <span class="docstring-category">Function</span>.</div><div><div><pre><code class="language-none">check_routing_connectivity(m::Map)</code></pre><p>Perform the following check:</p><ul><li>Check that the routing graph for each channel in <code>m.taskgraph</code> is weakly    connected.</li><li>Ensure there is a valid path from each source of the routing graph to each   destination of the routing graph.</li></ul></div></div><a class="source-link" target="_blank" href="https://github.com/hildebrandmw/Mapper2.jl/blob/188b7d7b8f74593ef125f94de64ed61a1a6b44ab/src/Map/Verification.jl#L237-L246">source</a></section><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="Mapper2.MapperCore.check_architecture_resources" href="#Mapper2.MapperCore.check_architecture_resources"><code>Mapper2.MapperCore.check_architecture_resources</code></a> — <span class="docstring-category">Function</span>.</div><div><div><pre><code class="language-none">check_architecture_resources(map::Map)</code></pre><p>Traverse the routing graph for each channel in <code>m.taskgraph</code>. Check:</p><ul><li>The routing resources used by each channel are valid for that type of channel.</li></ul></div></div><a class="source-link" target="_blank" href="https://github.com/hildebrandmw/Mapper2.jl/blob/188b7d7b8f74593ef125f94de64ed61a1a6b44ab/src/Map/Verification.jl#L282-L288">source</a></section><footer><hr/><a class="previous" href="taskgraph.html"><span class="direction">Previous</span><span class="title">Taskgraph</span></a><a class="next" href="extensions.html"><span class="direction">Next</span><span class="title">Extensions</span></a></footer></article></body></html>
